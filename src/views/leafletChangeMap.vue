<template>
	<div class="mainWrap">
		<div id="map"></div>
	</div>
</template>
<script>
	import TerraformerWKT from 'terraformer-wkt-parser'
	// 解决 leaflet 默认 maker 无法显示的问题   END
	export default {
		components: {
			L
		},
		data() {
			return {
				map: null,
				map_config: {
					zoom: 9,
					center: [39.40861097325809, 117.26806640625001],
					minZoom: 6,
					maxZoom: 18,
					key: "ff19838854ae3d41e75b90bb56f0aed6"
				},
				mapTypeList: ['Normal', 'Satellite'],
				mapTypeVal: 'Normal',
				compoentLayers: [{
					"id": "md_reach",
					"name": "河段",
					"value": "1",
					"mainClassId": "20000000000000000000000000000000",
					"subClassId": "20020000000000000000000000000000",
					"icon": require("@/assets/images/dangan.png"),
					"show": 0
				}, {
					"id": "md_doc",
					"name": "一河一档",
					"mainClassId": "191",
					"subClassId": "",
					"icon": require("@/assets/images/dangan.png"),
					"show": 1
				}, {
					"id": "md_strategy",
					"name": "一河一策",
					"mainClassId": "190",
					"subClassId": "",
					"icon": require("@/assets/images/dangan.png"),
					"show": 1
				}, {
					"id": "md_outfall",
					"name": "入河排污口",
					"value": "1",
					"mainClassId": "20000000000000000000000000000000",
					"subClassId": "20020000000000000000000000000000",
					"icon": require("@/assets/images/list.png"),
					"show": 1
				}, {
					"id": "md_sewage",
					"name": "污水处理厂",
					"value": "1",
					"mainClassId": "80000000000000000000000000000000",
					"subClassId": "80010000000000000000000000000000",
					"icon": require("@/assets/images/local2.png"),
					"show": 1
				}, {
					"id": "md_publicity",
					"name": "公示牌",
					"value": "1",
					"mainClassId": "70000000000000000000000000000000",
					"subClassId": "70010000000000000000000000000000",
					"icon": require("@/assets/images/gongshi.png"),
					"show": 1
				}, {
					"id": "md_section",
					"name": "监测断面",
					"value": "1",
					"mainClassId": "30000000000000000000000000000000",
					"subClassId": "30040000000000000000000000000000",
					"icon": require("@/assets/images/logo.png"),
					"show": 1
				}],
				mapJson: {
					checked: false,
					children: [],
					dataId: "120100000000",
					flag: "region",
					grade: 2,
					id: "120100000000",
					isParent: true,
					latitude: 39.08463,
					longitude: 117.44521,
					name: "天津市",
					open: false,
					pId: "120000000000",
					parentspath: "",
					regionLevel: null,
					spatialData: "MULTIPOLYGON(((117.434 40.2498,117.428 40.2478,117.422 40.2433,117.419 40.2426,117.408 40.2459,117.406 40.2421,117.408 40.2395,117.409 40.2357,117.406 40.2321,117.402 40.2307,117.387 40.2297,117.383 40.2264,117.386 40.2239,117.386 40.2197,117.383 40.2191,117.381 40.2161,117.374 40.2154,117.372 40.213,117.372 40.2069,117.38 40.206,117.382 40.2048,117.382 40.2016,117.374 40.1984,117.375 40.1947,117.374 40.1908,117.377 40.1879,117.383 40.1859,117.388 40.1868,117.389 40.1851,117.391 40.1852,117.397 40.1877,117.401 40.1866,117.399 40.1833,117.382 40.1745,117.375 40.174,117.365 40.1762,117.358 40.1762,117.354 40.1729,117.347 40.1709,117.347 40.1675,117.351 40.1629,117.352 40.159,117.347 40.15,117.339 40.141,117.33 40.139,117.321 40.1389,117.305 40.1363,117.3 40.1338,117.3 40.1315,117.297 40.126,117.292 40.1205,117.279 40.1191,117.277 40.1167,117.275 40.1167,117.265 40.1077,117.258 40.1061,117.245 40.1105,117.234 40.1102,117.221 40.1001,117.218 40.0969,117.218 40.0932,117.211 40.0946,117.205 40.0924,117.205 40.0892,117.208 40.0874,117.207 40.0852,117.209 40.0841,117.206 40.0839,117.203 40.0809,117.207 40.078,117.209 40.072,117.213 40.0699,117.216 40.0642,117.212 40.0631,117.202 40.0637,117.198 40.0624,117.193 40.064,117.191 40.0604,117.186 40.058,117.18 40.052,117.181 40.0447,117.18 40.0357,117.182 40.0315,117.182 40.027,117.186 40.0204,117.189 40.0144,117.19 40.0057,117.19 39.9977,117.191 39.9974,117.191 39.9942,117.189 39.9943,117.187 39.9801,117.182 39.9773,117.176 39.9767,117.173 39.9751,117.171 39.9631,117.167 39.9616,117.158 39.9608,117.159 39.9547,117.147 39.9459,117.145 39.9431,117.149 39.939,117.151 39.9354,117.15 39.934,117.148 39.9327,117.144 39.9348,117.142 39.9341,117.14 39.9307,117.143 39.9228,117.131 39.9198,117.132 39.9179,117.136 39.9171,117.138 39.9114,117.14 39.9096,117.143 39.9086,117.15 39.9091,117.152 39.9076,117.152 39.9043,117.144 39.9008,117.143 39.8971,117.145 39.8938,117.152 39.889,117.148 39.8788,117.156 39.8756,117.158 39.8713,117.162 39.8717,117.164 39.8763,117.168 39.873,117.16 39.8673,117.16 39.8662,117.168 39.8649,117.172 39.869,117.175 39.8672,117.174 39.8637,117.175 39.8627,117.18 39.8654,117.187 39.8605,117.194 39.861,117.204 39.8588,117.206 39.8551,117.212 39.8558,117.222 39.8517,117.223 39.8521,117.225 39.8558,117.231 39.8544,117.233 39.8591,117.241 39.8598,117.246 39.8565,117.245 39.8544,117.254 39.8429,117.249 39.8413,117.247 39.8375,117.249 39.8351,117.246 39.8331,117.247 39.8311,117.25 39.8315,117.251 39.829,117.229 39.8329,117.222 39.8308,117.214 39.8261,117.214 39.8295,117.206 39.831,117.202 39.8302,117.201 39.8338,117.195 39.8314,117.194 39.8335,117.187 39.829,117.185 39.8251,117.161 39.8224,117.161 39.8178,117.157 39.8178,117.154 39.8202,117.15 39.8182,117.15 39.8158,117.16 39.7976,117.165 39.7984,117.173 39.793,117.174 39.7815,117.192 39.77,117.2 39.7624,117.195 39.7587,117.189 39.7584,117.187 39.7538,117.182 39.7542,117.183 39.7507,117.164 39.7463,117.158 39.7408,117.16 39.7367,117.159 39.7358,117.155 39.7376,117.154 39.735,117.152 39.7338,117.153 39.7308,117.158 39.7243,117.16 39.7173,117.16 39.7209,117.162 39.7183,117.163 39.7161,117.16 39.716,117.164 39.708,117.162 39.7078,117.162 39.7037,117.164 39.7037,117.163 39.697,117.165 39.6879,117.163 39.6878,117.163 39.6859,117.162 39.6857,117.164 39.6721,117.162 39.6719,117.159 39.651,117.162 39.6497,117.162 39.6455,117.17 39.6444,117.171 39.6416,117.166 39.6409,117.166 39.6353,117.155 39.6353,117.144 39.6248,117.143 39.6216,117.141 39.6213,117.132 39.6146,117.127 39.6144,117.114 39.6214,117.086 39.6307,117.041 39.6453,117.019 39.6509,117.014 39.6504,117.015 39.6516,117.01 39.6522,117.009 39.6494,117.004 39.6464,117.001 39.6462,116.997 39.6424,116.984 39.6382,116.981 39.6391,116.971 39.6352,116.969 39.6366,116.969 39.6414,116.966 39.6469,116.964 39.6469,116.958 39.6426,116.952 39.6464,116.948 39.6576,116.95 39.6663,116.945 39.6684,116.941 39.6734,116.943 39.6766,116.938 39.6826,116.937 39.6939,116.939 39.6954,116.938 39.6987,116.932 39.703,116.931 39.7036,116.929 39.7026,116.929 39.7038,116.926 39.7049,116.913 39.7057,116.911 39.7053,116.91 39.7009,116.908 39.6969,116.908 39.6939,116.905 39.6933,116.907 39.6883,116.9 39.6858,116.901 39.6756,116.894 39.6736,116.894 39.6726,116.89 39.6708,116.887 39.6718,116.883 39.6748,116.877 39.6743,116.867 39.6693,116.858 39.6692,116.855 39.6663,116.851 39.6661,116.846 39.6623,116.845 39.6495,116.836 39.6465,116.832 39.6377,116.831 39.6315,116.835 39.623,116.835 39.6213,116.832 39.6192,116.814 39.6134,116.807 39.6131,116.807 39.6083,116.81 39.604,116.805 39.5988,116.798 39.5966,116.795 39.5922,116.794 39.5883,116.795 39.5844,116.798 39.5825,116.801 39.5793,116.802 39.5796,116.805 39.5759,116.801 39.5749,116.801 39.5716,116.803 39.5698,116.799 39.5647,116.789 39.5612,116.787 39.5575,116.788 39.5518,116.791 39.5453,116.794 39.5422,116.8 39.5313,116.81 39.5289,116.815 39.5262,116.812 39.5314,116.816 39.5327,116.817 39.5314,116.816 39.531,116.819 39.5261,116.817 39.5262,116.82 39.5119,116.81 39.5094,116.812 39.5089,116.81 39.509,116.809 39.5065,116.81 39.4997,116.807 39.4998,116.807 39.4982,116.81 39.4983,116.81 39.4956,116.812 39.4952,116.812 39.4879,116.815 39.4851,116.815 39.4814,116.808 39.4801,116.807 39.4792,116.808 39.4768,116.793 39.4746,116.786 39.4619,116.79 39.4583,116.807 39.4495,116.813 39.4491,116.821 39.4457,116.821 39.4431,116.836 39.4372,116.838 39.4387,116.84 39.4376,116.842 39.4389,116.841 39.4401,116.849 39.4419,116.855 39.437,116.862 39.4361,116.869 39.4313,116.859 39.4243,116.855 39.4232,116.855 39.4211,116.85 39.4189,116.85 39.4178,116.848 39.4172,116.846 39.4128,116.839 39.4116,116.834 39.4003,116.833 39.3907,116.836 39.3844,116.836 39.3746,116.835 39.3744,116.835 39.3771,116.831 39.3755,116.832 39.3731,116.825 39.3725,116.815 39.3682,116.821 39.3631,116.829 39.365,116.83 39.3634,116.831 39.3636,116.823 39.36,116.819 39.356,116.82 39.3482,116.822 39.3425,116.824 39.3415,116.827 39.3402,116.835 39.3409,116.847 39.3496,116.854 39.3606,116.857 39.3617,116.861 39.3613,116.869 39.3544,116.872 39.3457,116.879 39.3374,116.884 39.3364,116.884 39.3337,116.883 39.3307,116.885 39.3233,116.883 39.3118,116.877 39.3071,116.878 39.3042,116.877 39.3031,116.875 39.3028,116.874 39.3043,116.869 39.3031,116.865 39.2986,116.872 39.2779,116.869 39.2514,116.87 39.2466,116.878 39.2385,116.879 39.2397,116.88 39.2346,116.882 39.2311,116.886 39.2302,116.887 39.2233,116.882 39.2238,116.879 39.2205,116.878 39.2228,116.87 39.2155,116.866 39.2138,116.858 39.2136,116.854 39.2103,116.853 39.2071,116.855 39.2026,116.857 39.1908,116.858 39.181,116.858 39.175,116.86 39.1721,116.86 39.1563,116.864 39.1535,116.886 39.1549,116.896 39.153,116.906 39.1491,116.914 39.1366,116.917 39.1218,116.915 39.1169,116.922 39.1179,116.917 39.1158,116.913 39.1092,116.9 39.1038,116.896 39.0891,116.894 39.0868,116.883 39.0805,116.88 39.0765,116.879 39.0696,116.878 39.0615,116.874 39.0541,116.855 39.0528,116.855 39.0499,116.838 39.0486,116.836 39.0487,116.836 39.0522,116.819 39.0503,116.808 39.0443,116.805 39.0442,116.8 39.0404,116.798 39.0367,116.792 39.0328,116.785 39.0308,116.78 39.0326,116.762 39.0277,116.757 39.0274,116.757 39.0249,116.754 39.0247,116.748 39.0175,116.748 39.0141,116.75 39.0125,116.748 38.9999,116.746 38.9995,116.745 38.9943,116.742 38.9949,116.741 38.9908,116.74 38.9906,116.734 38.9798,116.722 38.9722,116.72 38.9666,116.717 38.9634,116.716 38.952,116.711 38.939,116.708 38.9351,116.705 38.9348,116.705 38.9309,116.702 38.9309,116.701 38.9215,116.703 38.9184,116.702 38.9104,116.703 38.9058,116.707 38.8985,116.713 38.8947,116.715 38.8946,116.717 38.8857,116.717 38.8807,116.715 38.8787,116.716 38.8522,116.74 38.8505,116.737 38.8346,116.743 38.8318,116.744 38.8297,116.741 38.8101,116.735 38.7984,116.741 38.7978,116.74 38.795,116.736 38.7958,116.733 38.7928,116.734 38.79,116.731 38.785,116.732 38.7831,116.736 38.7823,116.738 38.7786,116.745 38.7778,116.742 38.7624,116.745 38.7523,116.754 38.7523,116.758 38.74,116.769 38.742,116.769 38.7407,116.771 38.7404,116.788 38.7417,116.79 38.7428,116.791 38.7459,116.816 38.7419,116.821 38.7414,116.824 38.7432,116.841 38.7427,116.851 38.7402,116.855 38.7408,116.858 38.7443,116.86 38.7439,116.862 38.7427,116.863 38.7333,116.86 38.7187,116.865 38.7145,116.868 38.6891,116.87 38.6824,116.874 38.68,116.881 38.6811,116.893 38.6808,116.906 38.6858,116.916 38.686,116.919 38.6896,116.942 38.6897,116.983 38.6953,117.007 38.7017,117.034 38.7068,117.039 38.7047,117.036 38.701,117.033 38.6929,117.034 38.689,117.04 38.6856,117.056 38.6822,117.058 38.6796,117.054 38.6724,117.052 38.6605,117.054 38.658,117.054 38.6474,117.055 38.6355,117.059 38.6351,117.061 38.6299,117.06 38.6262,117.061 38.6212,117.059 38.6152,117.063 38.6068,117.081 38.6049,117.088 38.6001,117.091 38.5956,117.098 38.5916,117.114 38.5934,117.117 38.5969,117.128 38.5985,117.132 38.6011,117.132 38.6028,117.135 38.6037,117.14 38.6079,117.144 38.6078,117.146 38.6164,117.151 38.6147,117.16 38.6141,117.167 38.6153,117.171 38.6183,117.177 38.6199,117.191 38.6208,117.202 38.6287,117.207 38.6299,117.212 38.6394,117.222 38.6409,117.224 38.6382,117.231 38.6183,117.242 38.6164,117.25 38.6133,117.249 38.613,117.25 38.6119,117.249 38.611,117.253 38.6044,117.252 38.5993,117.25 38.5959,117.244 38.5923,117.25 38.5939,117.251 38.5931,117.244 38.5916,117.234 38.5848,117.232 38.5806,117.254 38.5843,117.254 38.5826,117.232 38.5786,117.237 38.5673,117.24 38.5664,117.262 38.5672,117.278 38.5743,117.345 38.5795,117.386 38.5847,117.392 38.5868,117.424 38.6097,117.464 38.6169,117.489 38.6148,117.498 38.6165,117.5 38.613,117.504 38.6117,117.506 38.6131,117.51 38.61,117.511 38.6097,117.514 38.6133,117.516 38.6135,117.518 38.6104,117.517 38.6058,117.521 38.6062,117.521 38.6048,117.519 38.6035,117.522 38.6019,117.527 38.6014,117.5886534 38.60710701,117.5863954 38.6133288,117.6008939 38.61462881,117.6027953 38.61992145,117.6029142 38.63208377,117.5992301 38.639046,117.5819983 38.63616836,117.5778865 38.65346959,117.5815943 38.65469463,117.57917 38.66594171,117.5780291 38.67340167,117.6076915 38.67384701,117.6081193 38.66460551,117.6501887 38.66471686,117.6502981 38.70136254,117.7191799 38.70160428,117.7203683 38.75236368,117.7055133 38.75259538,117.7037307 38.72339584,117.7037307 38.70879159,117.680557 38.70902343,117.6808541 38.72756793,117.6894699 38.72733615,117.6876873 38.75861919,117.6395572 38.75815584,117.6258906 38.74541247,117.6235138 38.71458728,117.6080086 38.71493157,117.6083617 38.75676576,117.6039741 38.75746989,117.5993299 38.75825919,117.5924385 38.76000551,117.5878263 38.76053211,117.5840764 38.76089131,117.5839164 38.76325873,117.5830607 38.76474134,117.5806479 38.76468814,117.5796701 38.76229096,117.5786704 38.76265061,117.5777199 38.76275105,117.5755539 38.7631452,117.5732412 38.76325924,117.5708934 38.7638264,117.568 38.764,117.567 38.7663,117.564 38.7664,117.564 38.7701,117.5731666 38.77020263,117.578 38.771,117.5919424 38.77267237,117.588 38.7753,117.5872201 38.78825708,117.590313 38.79750024,117.5870573 38.79930447,117.5936351 38.81691345,117.604 38.8188,117.6193818 38.84042343,117.6384364 38.85516753,117.6469928 38.84805975,117.7295152 38.82747278,117.7392126 38.84332083,117.685592 38.85753664,117.6910111 38.86934396,117.7472224 38.85583385,117.7546972 38.86763747,117.7495992 38.87526539,117.6827518 38.89052931,117.6848315 38.89654147,117.710382 38.8909918,117.7317732 38.88844806,117.7359326 38.89561655,117.8001061 38.87780961,117.8375981 38.86183291,117.8452039 38.87168792,117.8314734 38.87960061,117.8567643 38.91894341,117.7217709 38.96146317,117.7237495 38.96880781,117.7427639 38.96233975,117.8806182 38.92758693,117.8848964 38.94515032,117.8452039 38.95069575,117.8449662 38.95328347,117.8078882 38.95938272,117.8086012 38.96437263,117.7842858 38.97385638,117.7888738 38.97823164,117.7788674 38.98511078,117.779152 38.98715921,117.7775578 38.992463,117.7748031 39.00193481,117.7693365 39.02072798,117.7563295 39.02369628,117.7527168 39.02679834,117.7552124 39.03206044,117.7616297 39.03289126,117.7634123 39.03538367,117.7612732 39.04230656,117.7580645 39.04369106,117.7612732 39.05033626,117.774821 39.04618308,117.7908643 38.98468747,117.8133251 38.97276997,117.8290119 38.97276997,117.8199991 39.01097277,117.8241585 39.01174843,117.8184542 39.01451859,117.8066891 39.0571654,117.7464373 39.07847921,117.7289678 39.08650475,117.7293371 39.09129587,117.7337559 39.09048971,117.7348805 39.09246859,117.7447414 39.09000678,117.7514285 39.09065555,117.7774065 39.0847941,117.7822647 39.09249536,117.8234455 39.07847916,117.8435294 39.10430538,117.7930225 39.13150492,117.7887623 39.13731662,117.7929976 39.14614509,117.8032048 39.14670772,117.8135601 39.14872007,117.836399 39.16007616,117.8470756 39.18070539,117.8651604 39.15401876,117.87625 39.16007616,117.8802906 39.17168568,117.8684609 39.19126773,117.9352659 39.20753408,117.9463655 39.17850307,117.9543516 39.18130354,117.9445623 39.21167576,118.0041336 39.22128094,118.0439449 39.20401637,118.0430536 39.21276428,118.0656332 39.21437562,118.0636129 39.26210051,118.023 39.2782,118.023 39.2869,118.018 39.2913,118.019 39.2899,118.015 39.2908,118.013 39.2878,118.016 39.286,118.015 39.2852,118.011 39.2832,117.99 39.294,117.987 39.2933,117.986 39.2956,117.978 39.2944,117.977 39.2976,117.973 39.3001,117.971 39.2997,117.967 39.3064,117.967 39.3114,117.968 39.3112,117.969 39.3129,117.966 39.3116,117.965 39.3122,117.966 39.3134,117.965 39.3123,117.962 39.3153,117.96 39.3154,117.96 39.314,117.95 39.3158,117.95 39.3145,117.947 39.3148,117.941 39.3174,117.934 39.3173,117.919 39.3195,117.914 39.3183,117.913 39.317,117.908 39.3176,117.901 39.3157,117.899 39.317,117.898 39.3195,117.885 39.3226,117.887 39.3267,117.882 39.3312,117.872 39.3309,117.861 39.3291,117.858 39.3304,117.855 39.3331,117.849 39.3309,117.85 39.3279,117.848 39.3272,117.843 39.3263,117.842 39.3273,117.838 39.3324,117.838 39.3366,117.842 39.3401,117.855 39.3593,117.853 39.361,117.85 39.3615,117.847 39.3602,117.844 39.3569,117.833 39.3515,117.822 39.356,117.802 39.3541,117.797 39.3595,117.797 39.3691,117.804 39.3732,117.832 39.3757,117.846 39.3788,117.851 39.3723,117.855 39.373,117.858 39.3763,117.855 39.3841,117.856 39.3912,117.856 39.3979,117.854 39.4006,117.851 39.4014,117.841 39.3996,117.84 39.4065,117.86 39.4095,117.862 39.4378,117.865 39.4441,117.865 39.4534,117.868 39.4538,117.872 39.466,117.878 39.4658,117.881 39.4698,117.889 39.4721,117.891 39.4743,117.888 39.4847,117.886 39.4856,117.888 39.4913,117.89 39.51,117.9 39.5196,117.899 39.5242,117.896 39.5272,117.896 39.5307,117.9 39.5397,117.913 39.559,117.922 39.5683,117.923 39.5715,117.922 39.5776,117.912 39.5824,117.901 39.5841,117.89 39.589,117.878 39.5888,117.863 39.5947,117.859 39.5942,117.847 39.5896,117.846 39.5868,117.842 39.5893,117.82 39.5897,117.796 39.6005,117.787 39.5992,117.784 39.5977,117.783 39.5932,117.773 39.595,117.769 39.5966,117.769 39.5976,117.768 39.5964,117.76 39.5978,117.75 39.5924,117.739 39.5916,117.746 39.5823,117.749 39.5799,117.746 39.5778,117.746 39.5761,117.747 39.5751,117.74 39.5732,117.736 39.5679,117.733 39.5552,117.739 39.547,117.736 39.5455,117.727 39.5357,117.722 39.5338,117.717 39.5341,117.71 39.5291,117.704 39.5346,117.701 39.5417,117.701 39.5453,117.698 39.5457,117.699 39.547,117.699 39.5469,117.699 39.5498,117.695 39.5526,117.698 39.5532,117.697 39.5562,117.69 39.5562,117.685 39.5576,117.68 39.5617,117.679 39.5655,117.683 39.5685,117.693 39.5646,117.692 39.577,117.684 39.5818,117.676 39.5883,117.668 39.5887,117.667 39.5828,117.664 39.5794,117.657 39.5752,117.65 39.5739,117.647 39.5749,117.645 39.5781,117.649 39.5842,117.649 39.5866,117.648 39.5908,117.645 39.5929,117.636 39.5916,117.632 39.5927,117.63 39.6025,117.625 39.6009,117.622 39.5947,117.617 39.5914,117.615 39.5911,117.614 39.5935,117.613 39.6023,117.613 39.6052,117.615 39.6057,117.617 39.6027,117.62 39.6024,117.624 39.6056,117.626 39.6127,117.635 39.6121,117.634 39.6179,117.638 39.6237,117.636 39.6288,117.645 39.6277,117.646 39.6303,117.645 39.6342,117.646 39.6383,117.656 39.6361,117.658 39.6371,117.659 39.6394,117.66 39.6509,117.657 39.6566,117.662 39.6637,117.661 39.6651,117.654 39.6657,117.651 39.6679,117.653 39.6734,117.647 39.677,117.651 39.68,117.65 39.6811,117.644 39.6812,117.644 39.6843,117.638 39.6872,117.642 39.6932,117.641 39.6955,117.639 39.6988,117.636 39.6992,117.63 39.6948,117.627 39.7001,117.626 39.7006,117.626 39.6986,117.625 39.7011,117.614 39.7023,117.609 39.7047,117.596 39.7045,117.586 39.7098,117.585 39.717,117.581 39.7184,117.574 39.7178,117.578 39.7215,117.573 39.7217,117.572 39.7231,117.571 39.7254,117.573 39.728,117.578 39.731,117.583 39.7308,117.583 39.737,117.587 39.7346,117.591 39.7348,117.59 39.7374,117.585 39.7415,117.589 39.7431,117.589 39.7445,117.571 39.7496,117.564 39.7557,117.557 39.7538,117.554 39.7543,117.549 39.7616,117.547 39.7601,117.544 39.7558,117.537 39.7597,117.532 39.7587,117.533 39.7608,117.538 39.7605,117.54 39.7622,117.54 39.7747,117.543 39.7796,117.547 39.7832,117.549 39.7874,117.548 39.7947,117.554 39.7951,117.554 39.8022,117.552 39.8091,117.541 39.8235,117.536 39.8344,117.537 39.8443,117.518 39.8637,117.514 39.8697,117.512 39.8903,117.509 39.8987,117.508 39.9132,117.513 39.9164,117.516 39.9233,117.516 39.9293,117.506 39.9323,117.506 39.9396,117.509 39.9452,117.511 39.9444,117.516 39.9461,117.52 39.9518,117.523 39.9505,117.533 39.9691,117.539 39.9745,117.529 39.9921,117.53 39.9956,117.532 39.9971,117.54 39.9978,117.55 39.9955,117.558 39.9967,117.568 39.9945,117.569 39.9956,117.574 39.9934,117.581 39.9938,117.583 39.9957,117.584 39.9957,117.587 39.995,117.587 39.9927,117.594 39.9922,117.596 39.9892,117.597 39.9867,117.607 39.981,117.607 39.9771,117.604 39.975,117.606 39.9732,117.614 39.9695,117.626 39.9676,117.632 39.9709,117.651 39.9717,117.657 39.9736,117.665 39.9732,117.682 39.9827,117.7 39.9851,117.705 39.9837,117.713 39.9788,117.716 39.9783,117.718 39.9793,117.718 39.9767,117.721 39.9713,117.726 39.9707,117.735 39.9724,117.746 39.9646,117.749 39.9641,117.751 39.9687,117.757 39.9714,117.774 39.9656,117.775 39.9727,117.779 39.9772,117.781 39.9816,117.78 39.9842,117.775 39.9873,117.778 39.9935,117.777 39.9979,117.779 40.0136,117.779 40.0154,117.777 40.0141,117.777 40.0181,117.771 40.0203,117.761 40.0193,117.761 40.0177,117.755 40.0192,117.752 40.016,117.752 40.01,117.75 40.0089,117.747 40.0097,117.737 40.0172,117.736 40.0282,117.741 40.0347,117.74 40.0353,117.741 40.0395,117.742 40.0461,117.744 40.046,117.744 40.0446,117.745 40.047,117.747 40.0471,117.747 40.0456,117.755 40.0457,117.76 40.0473,117.765 40.051,117.767 40.0596,117.759 40.0648,117.753 40.0647,117.75 40.0677,117.748 40.0673,117.747 40.0721,117.753 40.0721,117.748 40.0769,117.741 40.08,117.739 40.0778,117.729 40.076,117.724 40.0791,117.711 40.0783,117.702 40.0808,117.699 40.083,117.699 40.087,117.697 40.0884,117.689 40.0925,117.684 40.0927,117.683 40.0869,117.681 40.0863,117.683 40.0853,117.682 40.0817,117.672 40.0828,117.672 40.0808,117.669 40.0811,117.671 40.0881,117.669 40.0888,117.668 40.091,117.666 40.091,117.665 40.0946,117.661 40.0993,117.655 40.0949,117.656 40.0959,117.652 40.0946,117.65 40.0895,117.643 40.0896,117.638 40.0969,117.641 40.1082,117.645 40.1138,117.644 40.1155,117.641 40.1158,117.645 40.1173,117.644 40.1266,117.643 40.1286,117.628 40.1346,117.62 40.1387,117.614 40.145,117.609 40.1554,117.602 40.1575,117.59 40.1586,117.57 40.1751,117.563 40.2003,117.559 40.2042,117.556 40.2052,117.56 40.2118,117.564 40.2148,117.563 40.2184,117.561 40.2215,117.544 40.2203,117.542 40.2227,117.542 40.2279,117.54 40.23,117.518 40.2299,117.513 40.2273,117.507 40.2257,117.501 40.2246,117.495 40.2252,117.486 40.2289,117.476 40.2346,117.471 40.2325,117.468 40.2366,117.468 40.2388,117.445 40.2484,117.434 40.2498)))",
					type: ""
				}
			}
		},
		mounted() {
			this.$nextTick(() => {
				this.initMap();
			})
		},
		methods: {
			initMap() {
				let _this = this; //防止与leaflet中 this  冲突
				var normalm = L.tileLayer.chinaProvider('TianDiTu.Normal.Map', {
						maxZoom: _this.map_config.maxZoom,
						minZoom: _this.map_config.minZoom,
						key: _this.map_config.key
					}),
					normala = L.tileLayer.chinaProvider('TianDiTu.Normal.Annotion', {
						maxZoom: _this.map_config.maxZoom,
						minZoom: _this.map_config.minZoom,
						key: _this.map_config.key
					}),
					imgm = L.tileLayer.chinaProvider('TianDiTu.Satellite.Map', {
						maxZoom: _this.map_config.maxZoom,
						minZoom: _this.map_config.minZoom,
						key: _this.map_config.key
					}),
					imga = L.tileLayer.chinaProvider('TianDiTu.Satellite.Annotion', {
						maxZoom: _this.map_config.maxZoom,
						minZoom: _this.map_config.minZoom,
						key: _this.map_config.key
					});
				var normal = L.layerGroup([normalm, normala]),
					image = L.layerGroup([imgm, imga]);
				let imgSrc = require('@/assets/images/local.png');
				let baseVal = "<img src='../assets/images/local2.png' />"
				var baseLayers = {
					"<div class='localMap'></div>": normal,
					"<div class='local2Map'></div>": image,
				}
				this.map = L.map("map", {
					layers: [normal],
					center: this.map_config.center,
					zoom: this.map_config.zoom,
					zoomControl: false,
					attributionControl: false
				});
				L.control.layers(baseLayers).addTo(this.map);
				//地图上市级边界
				let a = new TerraformerWKT.parse(_this.mapJson.spatialData)//.coordinates;
				var geojsonFeature = {
					"type": "Feature",
					"properties": {
						"name": "tianjin",
						"popupContent": "This is where the Rockies play!"
					},
					"geometry": a
				};
				// let a = new Terraformer.WKT.parse(_this.mapJson.spatialData);
				let rMap = L.geoJson(geojsonFeature, {
					style(feature) {
						return {
							color: 'rgb(56,168,0)',
							// fill:false,//不填充，表示只显示边界，鼠标移到边界范围内不触发mouseover事件；
							fillOpacity: 0,
							weight: 5,
							// dashArray: '0'
						}
					}
				}).on({
					mouseover: _this.highlight, //鼠标移动上去高亮
					mouseout: _this.resetHighlight, //鼠标移出恢复原样式
					click: function(e) {
						console.log(e) //当前点击的物体的名称
					}
				}).addTo(this.map)
				//自定义地图控件
				this.loadControl();
			},
			loadControl() {
				let _this = this;
				L.Control.mapControl = L.Control.extend({
					//在此定义参数    
					options: {
						position: 'topleft'
					},
					//在此初始化
					initialize: function(options) {
						L.Util.extend(this.options, options);
					},
					onAdd: function(map) {
						this._container = L.DomUtil.create('div', 'controlWrap');
						let controlUl = L.DomUtil.create('ul');
						for (let i = 0; i < _this.compoentLayers.length; i++) {
							let obj = _this.compoentLayers[i];
							if (obj.show == 1) {
								let li = L.DomUtil.create('li');
								let img = L.DomUtil.create('img');
								img.src = obj.icon;
								let span = L.DomUtil.create('span');
								span.innerHTML = obj.name;
								li.appendChild(img);
								li.appendChild(span);
								L.DomEvent.on(li, 'click', _this.getCtrlMsg);
								controlUl.appendChild(li);
							}
						}
						this._container.appendChild(controlUl);
						return this._container
						//可在此添加控件内容
					}
				});
				L.control.mapControl = function(opts) {
					return new L.Control.mapControl(opts);
				}
				L.control.mapControl().addTo(_this.map)
			},
			getCtrlMsg(ev) {
				console.log('ev',ev)
				let parentBox = ev.target.nodeName;
				console.log('parentBox',parentBox)
				alert(11)
			},
			highlight(e) {
				var layer = e.target;
				layer.setStyle({
					weight: 6,
					color: '#f00',
					// fillOpacity: 0
				})
			},
			resetHighlight(e) {
				var layer = e.target;
				layer.setStyle({
					color: 'rgb(56,168,0)',
					weight: 5,
					// fillOpacity: 0
				})
			}
		},
		beforeDestroy() {
			if (this.map) {
				this.map.remove();
			}
		}
	}
</script>
<style scoped lang="less">
	@import '../assets/css/control.css';

	#map {
		height: 780px;
	}
</style>
